<!--pages/secondRank/secondRank.wxml-->
<active-header info="{{activeHeaderInfo}}"></active-header>
<scroll-view scroll-y="{{canScroll}}" class="second-page" enable-back-to-top="true" bindscrolltolower="loadNextPage" lower-threshold="500">
    <rank-header header-info="{{headerData}}" collect-params="{{collectParams}}" bindtapmore="ontapmore" header-type="second" bindtapdetail="opendetail" bindgoAuthorize="goAuthorize" is-collected="{{isCollected}}"></rank-header>
    <tab header-data="{{tabHeaderData}}" bindchange="tabchange">
        <second-list wx:if="{{subType === 0}}" sub-element="{{subElement}}" last-element="{{lastElement}}" bindaddelement="addelement" bindgoinvite="listToInvite"></second-list>
        <second-discuss wx:if="{{subType === 1}}" second-id="{{secondId}}" bindaddDiscuss="addDiscuss" discuss-info="{{discussData}}"></second-discuss>
        <second-activity wx:if="{{subType === 2}}"></second-activity>
    </tab>
    <pop-up wx:if="{{activePopup}}" bindclose="closePopup" popup-size="{{popupSize}}" popup-show="{{showPopup}}" id="popup" catchtouchmove="ture" small-data="{{moreItems}}" bindtapSmallItem="tapMoreItem">
        <add-element slot="large" bindcancel="closePopup" bindconfirm="submitadd" wx:if="{{popupType == 'addElement'}}" bindsetNewElementName="setNewElementName" bindsetNewElementDesc="setElementDesc" bindsetElementImg="setElementImg"></add-element>
        <add-discuss slot="large" bindcancel="closePopup" bindconfirm="submitDiscuss" wx:if="{{popupType == 'addDiscuss'}}" bindsetValue="setDiscussValue"></add-discuss>
        <invite slot="large" bindcancel="closePopup" bindconfirm="submitInvite" wx:if="{{popupType == 'invite'}}" second-id="{{secondId}}" bindcompleteInvite="closePopup"></invite>
        <second-detail slot="large" bindcancel="closePopup" wx:if="{{popupType == 'detail'}}" second-info="{{detailInfo}}">
        </second-detail>
        <report slot="large" bindcancel="closePopup" bindconfirm="submitReport" wx:if="{{popupType == 'report'}}" report-id="{{secondId}}" report-type="2" id-type="second_id"></report>
    </pop-up>
</scroll-view>
<authorize catchtouchmove="ture" wx:if="{{goAuthorize}}" bindcloseAuthorize="closeAuthorize"></authorize>
<tab-bar tab-bar-list="{{tabBarList}}" bindtapItem="tabItemClick"></tab-bar>